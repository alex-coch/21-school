## Part 1. Установка ОС
* Устанавливаем Ubuntu 20.04 Server LTS без графического интерфейса
* Проверяем версию Ubuntu командой `cat /etc/issue`<br>
![Версия Ubuntu](screenshot/01-version.png)<br>*Версия Ubuntu*<br>

## Part2. Создание пользователя
* Создаем нового пользователя командой `sudo adduser <имя пользователя>`<br>
![Создание нового пользователя](screenshot/02-adduser.png)<br>*Создание нового пользователя*<br>
* Даем новому пользователю права adm командой `sudo usermod -aG adm <имя пользователя>`<br>
![Присвоение прав вдминистратора](screenshot/02-adm.png)<br>*Присвоение прав вдминистратора*<br>
* Проверяем создание нового пользователя командой `cat /etc/passwd` <br>
![Проверка нового пользователя](screenshot/02-passwd.png) <br>*Проверка нового пользователя*<br>

## Part 3.  Настройка сети ОС
* Проверяем текущее название машины командой `hostname`<br>
![Проверка названия машины](screenshot/03-hostname.png) <br>*Проверка названия машины*<br>
* Изменяем название машины на user-1 использовав команду `sudo hostname <имя хоста>`<br>
![Изменяем название машины](screenshot/03-change.png) <br>*Изменяем название машины*<br>
* Далее меняем название машины в файлах hosts и hostname с помощью редактора nano командами `sudo nano /etc/hosts`<br> ![Редактируем файл hosts](screenshot/03-hosts.png) <br>*Редактируем файл hosts*<br>
и `sudo nano /etc/hostname`<br> ![Редактируем файл hostname](screenshot/03-hostname2.png) <br>*Редактируем файл hostname*<br>
* Вызываем перезагрузку системы для сохраниения изменений `sudo reboot`<br>
![Перезагружаем систему](screenshot/03-reboot.png) <br>*Перезагружаем систему*<br>
* Проверяем новое название машины командой `cat /etc/hostname`<br>
![Проверяем сохраниение изменений](screenshot/03-hostname3.png) <br>*Проверяем сохраниение изменений*<br>
* Вызываем команду `timedatectl` для проверки текущего часового пояса<br>
![Проверка текущего часового пояса](screenshot/03-tz.png) <br>*Проверка текущего часового пояса*<br>
* Задаем необходимый часовой пояс командой `sudo timedatectl set-timezone Europe/Moscow`<br>
![Изменяем часовой пояс](screenshot/03-tz2.png)<br>*Изменяем часовой пояс*<br>
* Проверяем изменения командой `timedatectl`<br>
![Проверяем изменения](screenshot/03-tz3.png) <br>*Проверяем изменения*<br>
* Выводим названия сетевых интерфейсов командой `ip addr` <br>
![Названия сетевых интерфейсов](screenshot/03-ipaddr.png) <br>*Названия сетевых интерфейсов*<br>

* **Loopback** — совокупность методов, нужных для корректной работы маршрутизатора и передачи данных.<br>
* Сам интерфейс же является отображением логических процессов в маршрутизаторе. Также саму технологию используют и для других целей:<br>
    1) тестирование передачи данных от обслуживающего центра коммутации;<br>
    2) проверка сигнала на расстоянии;<br>
    3) обеспечение работы коммутационных кабелей и их проверка;<br>
    4) тест обратной петли, когда сигнал посылается и возвращается отправителю по всем коммуникационным каналам.<br>
* Использовав команду `ip r` узнаем ip-адрес устройства, от DHCP сервера <br>
![ip-адрес устройства](screenshot/03-ip2.png) <br>*ip-адрес устройства*<br>

* **Dynamic Host Configuration Protocol (DHCP)** - это протокол управления сетью, используемый в сетях TCP/IP, в котором DHCP-сервер динамически присваивает каждому устройству IP-адрес и другие параметры сетевой конфигурации, чтобы они могли связываться с другими IP-сетями.<br>
* Выводим внешний и внутренний ip-адреса шлюза командами `curl 2ip.ru`<br>
![Внешний ip-адрес](screenshot/03-ext_ip.png)<br>*Внешний ip-адрес*<br>
и `ip route | grep default`<br>
![Внутренний ip-адрес](screenshot/03_int_ip.png)<br>*Внутренний ip-адрес*<br>
* Задаем статичные настройки ip, gw, dns командой `sudo nano /etc/resolv.conf`<br>
![Редактирование настроек](screenshot/03-resolv.png)<br>*Редактирование настроек*<br>
* Перезагружаем виртуальную машину
* Проверяем, что статичные сетевые настройки (ip, gw, dns) соответствуют данным, командой  `ping -c 8 1.1.1.1 && ping -c 8 ya.ru`<br>
![Проверяем настройки](screenshot/03-ping.png)<br>*Проверяем настройки*<br>

## Part 4. Обновление ОС
* Командой `sudo apt update` узнаём, сколько есть пакетов обновления<br>
* Обновляем системные пакеты до последней, на момент выполнения задания, версии командой `sudo apt full-upgrade`<br>
* После обновления системных пакетов, вводим команду обновления повторно, выводится сообщение, что обновления отсутствуют.<br>
![Проверка обновлений](screenshot/04.png)<br>*Проверка обновлений*<br>

## Part 5. Использование команды sudo
* sudo (англ. Substitute User and do, дословно «подменить пользователя и выполнить») — программа для системного администрирования UNIX-систем, позволяющая делегировать те или иные привилегированные ресурсы пользователям с ведением протокола работы.<br>
Даем пользователю, созданному в Part 2, права на выполнение команды sudo `sudo usermod -a -G sudo <имя пользователя>`<br>
![Разрешение sudo](screenshot/05-sudo.png)<br>*Разрешение sudo*<br>
* заходим на сервер под другим пользователем `su - <имя пользователя>`<br>
* Изменяем имя сервера на User-2, командой `sudo hostname User-2`. После ввода пароля проверяем изменения<br>
![Изменение имени сервера](screenshot/05-sudo2.png)<br>*Изменение имени сервера*<br>

## Part 6. Установка и настройка службы времени
* Выводим текущее время команой `date`<br>
![Текущее время](screenshot/06-date.png)<br>*Текущее время*<br>
* Активируем NTP командой `sudo timedatectl set-ntp on`<br>
* Командой `timedatectl show` проверяем подключенную службу синхронизации <br>
![NTPSynchronized активна](screenshot/06-date2.png)<br>*NTPSynchronized активна*<br>

## Part 7. Установка и использование текстовых редакторов
* Устанввливаем тестовый редактор MCEDIT командой `sudo apt install mc`<br>

**Создаем и редактируем файл с сохранением изменений:**<br>
**NANO:**
* Создаем файл командой `nano test_nano.txt` и записываем туда свой никнейм<br>
* Для выхода с сохранением используем команды: `ctrl+x`, `Y`, `Enter` либо `ctrl+o`, `Enter`, `ctrl+x`<br>
![NANO новый файл](screenshot/07-nano.png)<br>*NANO новый файл*<br>

**VIM:**
* Создаем файл командой `vim test_vim.txt` и записываем туда свой никнейм (для прехода в режим вставки нажимаем `i`) <br>
* Для выхода с сохранением используем команды: `Esc`, `:wq!`, `Enter`<br>
![VIM новый файл](screenshot/07-vim.png)<br>*VIM новый файл*<br>

**MCEDIT:**
* Создаем файл командой `mcedit test_mcedit.txt` и записываем туда свой никнейм<br>
* Для выхода с сохранением используем команды: `fn+F2`, `Enter`, `fn+F10`<br>
![MCEDIT новый файл](screenshot/07-mc.png)<br>*MCEDIT новый файл*<br>

**Редактируем файл без сохранения зменений:**<br>
**NANO:**
* Открываем файл командой `nano test_nano.txt` и меняем записаный никнейм на "21 School 21"<br>
* Для выхода без сохраненя используем команды: `ctrl+x`, `n`, `Enter`<br>
![NANO без сохранения](screenshot/07-nano2.png)<br>*NANO без сохранения*<br>

**VIM:**
* Открываем файл командой `vim test_vim.txt` и меняем записаный никнейм на "21 School 21" (для прехода в режим вставки нажимаем `i`) <br>
* Для выхода без сохранения используем команды: `Esc`, `:q!`, `Enter`<br>
![VIM без сохранения](screenshot/07-vim2.png)<br>*VIM без сохранения*<br>

**MCEDIT:**
* Открываем файл командой `mcedit test_mcedit.txt` и меняем записаный никнейм на "21 School 21"<br>
* Для выхода без сохранения используем команды: `fn+F10`, `No`, `Enter`<br>
![MCEDIT без сохранения](screenshot/07-mc2.png)<br>*MCEDIT без сохранения*<br>

**Редактируем файл с поиском и заменой слова:**<br>
**NANO:**
* Открываем файл командой `nano test_nano.txt`<br>
* Для поиска в NANO используем комбинацию `ctrl+W`<br>
![NANO поиск слова](screenshot/07-nano3.png)<br>*NANO поиск слова*<br>
* Для замены слова в NANO вводим `ctrl+\`, пишем слово для поиска, нажимаем `Enter`, пишем слово для замены, нажимаем `Enter`, выбираем `Y`<br>
![NANO замена слова](screenshot/07-nano4.png)<br>*NANO замена слова*<br>

**VIM:**
* Открываем файл командой `vim test_vim.txt`<br>
* Для поиска в VIM пишем команду `/<слово для поиска>`<br>
![VIM поиск слова](screenshot/07-vim3.png)<br>*VIM поиск слова*<br>
* Для замены слова в VIM вводим используем команду `:%s/<заменяемое слово>/<новое слово>`<br>
![VIM замена слова](screenshot/07-vim4.png)<br>*VIM замена слова*<br>

**MCEDIT:**
* Открываем файл командой `mcedit test_mcedit.txt`<br>
* Для поиска в MCEDIT используем комбинацию `fn+F7` вводим нужное слово или строку и нажимаем   `Enter`<br>
![MCEDIT поиск слова](screenshot/07-mc3.png)<br>*MCEDIT поиск слова*<br>
* Для замены слова в MCEDIT используем комбинацию `fn+F4` в первом поле пишем заменяемое слово, во втором поле пишем новое слово, нажимаем `Enter` и выбираем `Заменить`<br>
![MCEDIT замена слова](screenshot/07-mc4.png)<br>*MCEDIT замена слова*<br>

## Part 8. Установка и базовая настройка сервиса SSHD
* Командой `sudo apt install openssh-server` устанавливаем службу SSHd<br>
* Подключаем автостарт службы `sudo update-rc.d ssh defaults`<br>
* Для настройки порта открываем текстовый редактор `sudo nano /etc/ssh/sshd_config` и добавляем строку "Port 2022"<br>
![Настройка порта](screenshot/08-sshd.png)<br>*Настройка порта*<br>
* Перезапускаем сервер SSH для применения изменений `/etc/init.d/ssh restart`<br>
* Используя команду `ps -axfv | grep sshd` проверяем наличие процесса SSHd<br>
![Процессы SSHd](screenshot/08-ps.png)<br>*Процессы SSHd*<br>

* Команда `ps` выводит список текущих процессов на вашем сервере. Используется обычно в сочетании с командой `grep`<br>
* Флаги:<br>
  -a: Выбирает все процессы, кроме лидеров сеансов и процессов, не связанных с терминалом.<br>
  -x: Заставляет `ps` отображать список всех процессов, которыми вы владеете (тот же EUID, что и у `ps`), или перечислять все процессы при использовании вместе с опцией a<br>
  -f: Выводит полноформатный список<br>
  -v: Выводит информацию о версии<br>

* Комндой `sudo apt install net-tools` устанавливаем "net-tools" после чего выполняем команду `netstat -tan`<br>
![Команда netstat](screenshot/08-netstat.png)<br>*Команда netstat*<br>

* Опция **-a** показывает состояние всех сокетов; **-n** показывает ip адрес, а не сетевое имя; **-t** показывает только tcp соединения.<br>
* Значения столбцов:<br>
    1) Proto - протокол, используемый сокетом;<br>
    2) Recv-Q - количество байтов, не скопированных пользовательской программой, подключенной к этому сокету;<br>
    3) Local Address - локальный адрес (имя локального хоста) и номер порта сокета;<br>
    4) Foreign Address - удаленный адрес (имя удаленного хоста) и номер порта сокета;<br>
    5) State - состояние сокета;<br>
    6) 0.0.0.0 в этом контексте означает "все IP-адреса на локальной машине".<br>

## Part 9. Установка и использование утилит **top**, **htop**
**top:**<br>
* Запускаем утилиту `top` одноименной командой и видим необходимую информацию
![Расшифровка вывода top](screenshot/09-top.png)<br>*Расшифровка вывода top*<br>
* Для того, чтобы узнать pid процесса, занимающего больше всего памяти выполним запуск "top" с сортировкой по проценту занятой памяти `top -b -o +%MEM | head -n 22` необходимый процесс будет первым в списке (в данном случае PID процесса - 29018)<br>
![pid процесса занимающего больше всего памяти](screenshot/09-top2.png)<br>*pid процесса занимающего больше всего памяти*<br>
* По аналогии с предыдущим пунктом узнаем pid процесса, занимающего больше всего процессорного времени `top -b -o +TIME | head -n 22` (в данном случае PID - 5386<br>
![pid процесса, занимающего больше всего процессорного времени](screenshot/09-top3.png)<br>*pid процесса, занимающего больше всего процессорного времени*<br>

**htop:**<br>
* Запускаем утилиту командой `htop`, для изменения типа сортировку используем `F6`<br>
![PID](screenshot/09-htop1.png)<br>*PID*<br>
![PERCENT_CPU](screenshot/09-htop2.png)<br>*PERCENT_CPU*<br>
![PERCENT_MEM](screenshot/09-htop3.png)<br>*PERCENT_MEM*<br>
![TIME](screenshot/09-htop4.png)<br>*TIME*<br>
* Для фильтрации процессов по названию используем комбинацию клавиш `fn+F4` пишем необходимое название в данном случае  "sshd"<br>
![SSHd](screenshot/09-htop5.png)<br>*SSHd*<br>
* Для поиска процесса `syslog` используем функцию поиска процессов `fn+F3`<br>
![syslog](09-htop6.png)<br>*syslog*<br>

## Part 10. Использование утилиты **fdisk**
* Запускаем утилиту командой `sudo fdisk -l`<br>
![Информация о жестком диске](screenshot/10-fdisk.png)<br>*Информация о жестком диске*<br>
    * Название жесткого диска: WDC PC SN730 SDBPNTY-512G-1036<br>
    * Размер: 476,94 GiB<br>
    * Количество секторов: 1000215216<br>
    * Размер swap: 0 <br>

## Part 11. Использование утилиты **df**
* Запускаем команду `df` либо `df /`, для сортировки по корневому разделу<br>
![df корневой раздел](screenshot/11-df.png)<br>*df корневой раздел*<br>
    * Размер раздела: 490617784<br>
    * Размер занятого пространства: 71144892<br>
    * Размер свободного пространства: 394477412<br>
    * Процент использования: 16%<br>
    * Единица измерения в выводе: Kb<br>

* Запускаем команду `df -Th` либо `df -Th /`, для сортировки по корневому разделу<br>
![df -Th корневой раздел](screenshot/11-df2.png)<br>*df -Th корневой раздел*<br>
    * Размер раздела: 468G<br>
    * Размер занятого пространства: 68G<br>
    * Размер свободного пространства: 377G<br>
    * Процент использования: 16%<br>
    * Тип файловой системы для раздела: ext4<br>

## Part 12. Использование утилиты **du**
* Запускаем команду `du`<br> 
![Вывод команды du](screenshot/12-du.png)<br>*Вывод команды du*<br>
* Выводим размер папок в байтах `/home`, `/var`, `/var/log` с помощью команды `sudo du -s -h -b /home && sudo du -s -h -b /var && sudo du -s -h -b /var/log`<br>
![Размер папок в байтах](screenshot/12-du2.png)<br>*Размер папок в байтах*<br>
* Выводим размер всего содержимого в `/var/log` с помощью команды `sudo du -a -h /var/log`<br>
![Размер всего содержимого в /var/log](screenshot/12-du3.png)<br>*Размер всего содержимого в /var/log*<br>

## Part 13. Установка и использование утилиты **ncdu**
* Устанавливаем утилиту **ncdu** командой `sudo apt install ncdu`<br>
* Выводим размер необходимых папок используя команду `ncdu`:<br>
![ncdu /home](screenshot/13-ncdu.png)<br>*ncdu /home*<br>
![ncdu /var](screenshot/13-ncdu2.png)<br>*ncdu /var*<br>
![ncdu /var/log](screenshot/13-ncdu2.png)<br>*ncdu /var/log*<br>

## Part 14. Работа с системными журналами
* Открываем для просмотра системные журналы:
![/var/log/dmesg](screenshot/14-dmesg.png)<br>*/var/log/dmesg*<br>
![/var/log/syslog](screenshot/14-syslog.png)<br>*/var/log/syslog*<br>
![/var/log/auth.log](screenshot/14-auth.png)<br>*/var/log/auth.log*<br>
* Для того чтобы узнать время последней успешной авторизации используем команду `last`<br>
![Время последней успешной авторизации](screenshot/14-last.png)<br>*Время последней успешной авторизации*<br>
* перезапускаем службу SSHd и проверяем и ищем в логах сообщение о рестарте службы командами `sudo systemctl restart ssh` и `cat /var/log/syslog`<br>
![Перезапуск SSHd в логах](screenshot/14-ssh.png)<br>*Перезапуск SSHd в логах*<br>

## Part 15. Использование планировщика заданий **CRON**
* Настраиваем cron для работы в фоновом режиме `sudo systemctl enable cron`<br>
* Для того, чтобы запланировать задачу используем команду `crontab -e`, затем выбираем один из предложенных текстовых редакторов<br>
* В открывшемся файле дописываем необходимую задачу (в нашем случае `"*/2 * * * * uptime"`), сохрняем и закрываем редактор, в терминале отобразится соощение об успешном добавлении задачи<br>
![Задача добавлена](screenshot/15-crontab.png)<br>*Задача добавлена*<br>
* Проверяем список текущих задач командой `crontab -l`<br>
![Список текущих задач](screenshot/15-crontab2.png)<br>*Список текущих задач*<br>
* Проверяем выполение задач в логах командой `grep CRON /var/log/syslog`<br>
![Задача uptime в логах](screenshot/15-log.png)<br>*Задача uptime в логах*<br>
* Для удаления всех задач из планировщика используем команду `crontab -r`<br>
* Снова проверяем список текущих задач командой `crontab -l`<br>
![Задачи отсутсвуют](screenshot/15-empty.png)<br>*Задачи отсутсвуют*<br>

